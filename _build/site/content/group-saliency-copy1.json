{"version":2,"kind":"Notebook","sha256":"5dd3054a172a402de6e0f743d87fc6968843181e314e803f6d7eaf07ae827f3c","slug":"group-saliency-copy1","location":"/content/group_saliency-Copy1.ipynb","dependencies":[],"frontmatter":{"title":"MACHINE GAZING🤖👁️‍🗨️✨","content_includes_title":false,"kernelspec":{"name":"python3","display_name":"Python 3 (ipykernel)","language":"python"},"github":"https://github.com/brainhack-school2025/analyses_friends_annotations","keywords":[],"edit_url":"https://github.com/brainhack-school2025/analyses_friends_annotations/blob/main/content/group_saliency-Copy1.ipynb","exports":[{"format":"ipynb","filename":"group_saliency-Copy1.ipynb","url":"/group_saliency-Copy1-e0babadaa0573613e60f567bf69bb4d4.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import matplotlib.pyplot as plt\nimport numpy as np\n\n\n","visibility":"hide","key":"QDyWWyRiR5"},{"type":"output","id":"37OjiqWz54igdpxbwiJgR","data":[],"visibility":"show","key":"fAON8aoGtm"}],"visibility":"show","key":"KreI5vRMsj"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nimport seaborn as sns\n","visibility":"hide","key":"TYYJNhXYfr"},{"type":"output","id":"mm9UsaEV7qWDDNoKSUoob","data":[],"visibility":"show","key":"R7fCIG4huR"}],"visibility":"show","key":"CPHLdgJKfu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#read data set as pd\ndf= pd.read_csv(\"../output/Peak_scenes_merged.tsv\", sep='\\t')","visibility":"hide","key":"SnkkvYRUYW"},{"type":"output","id":"ZCkmikYImzTvjk5oAhM-1","data":[],"visibility":"show","key":"sPukxgdWPM"}],"visibility":"show","key":"q6xpf96MvF"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Define the new bin edges and labels\ndf[\"episode_short\"] = df[\"episode\"].str.extract(r'(s\\d+e\\d+)', expand=False).str.upper()\nconditions = [\n    df['p'] == 1,\n    df['p'] == 2,\n    df['p'] == 3,\n    df['p'] > 3\n]\nlabels = ['1', '2', '3', '>3']\n\ndf['p_bin'] = np.select(conditions, labels, default='other') \n\n# Group by episode and binned p values, then count\nframe_counts = df.groupby(['episode_short', 'p_bin'], observed=True).size().unstack(fill_value=0)\n\n# Normalize to get the proportion of each p-bin per episode\nframe_proportions = frame_counts.div(frame_counts.sum(axis=1), axis=0)","visibility":"hide","key":"rcbZk5hpKx"},{"type":"output","id":"2X6POl1AQWI2CwMp0w4PV","data":[],"visibility":"show","key":"elnueHc985"}],"visibility":"show","key":"vKbfy6QSHz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HEIGHT POSITION DENSITY (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CNnbme5ssc"}],"identifier":"height-position-density-pixel-space","label":"HEIGHT POSITION DENSITY (pixel space)","html_id":"height-position-density-pixel-space","implicit":true,"key":"ytqnftuWzS"}],"key":"q3C60Pskgn"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# plot for Density of Height Positions Across Frames\nplt.figure(figsize=(12, 6))\nplt.hexbin(df[\"frame\"], df[\"h\"], gridsize=50, cmap=\"plasma\", mincnt=1)\nplt.gca().invert_yaxis()\nplt.colorbar(label=\"Counts\")\nplt.xlabel(\"Frame\")\nplt.ylabel(\"Height (h)\")\nplt.title(\"Density of Height Positions Across Frames\")\nplt.show()\n","visibility":"hide","key":"qXAIy91rZj"},{"type":"output","id":"v20Ro-GV90NGKMY1A0FJk","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f48c0dd3b8b93f8c03ecdef363b24c83","path":"/f48c0dd3b8b93f8c03ecdef363b24c83.png"},"text/plain":{"content":"<Figure size 1200x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"ATbGHEeemx"}],"visibility":"show","key":"cCCcW2SeGW"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"WIDTH POSITION DENSITY (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jboAsucld4"}],"identifier":"width-position-density-pixel-space","label":"WIDTH POSITION DENSITY (pixel space)","html_id":"width-position-density-pixel-space","implicit":true,"key":"IPNGnoNeyU"}],"key":"s4kXZiZLFt"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# plot for Density of width Positions Across Frames\nplt.figure(figsize=(12, 6))\nplt.hexbin(df[\"frame\"], df[\"w\"], gridsize=50, cmap=\"plasma\", mincnt=1)\nplt.colorbar(label=\"Counts\")\nplt.xlabel(\"Frame\")\nplt.ylabel(\"Width (w)\")\nplt.title(\"Density of Width Positions Across Frames\")\nplt.show()\n","visibility":"hide","key":"UZrTWAdgkE"},{"type":"output","id":"1ItL4v2VlA0UH8aTfg4OK","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3be995a149397e9485587937ac9166e3","path":"/3be995a149397e9485587937ac9166e3.png"},"text/plain":{"content":"<Figure size 1200x600 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"f9KGc4kLar"}],"visibility":"show","key":"OgewkgWvVk"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# get stats on h and w depending on the scene_number\nscene_stats = df.groupby([\"episode_short\", \"global_scene_number\"]).agg({\n    \"h\": [\"mean\", \"std\", \"min\", \"max\"],\n    \"w\": [\"mean\", \"std\", \"min\", \"max\"]\n}).reset_index()\n\n# Optional: flatten multi-level columns\nscene_stats.columns = [\"episode_short\", \"global_scene_number\", \"h_mean\", \"h_std\", \"h_min\", \"h_max\",\n                       \"w_mean\", \"w_std\", \"w_min\", \"w_max\"]\n","visibility":"hide","key":"OGGAMzojbU"},{"type":"output","id":"hhbwAffRMSydMNEw8glDs","data":[],"visibility":"show","key":"SJV0rdL2MQ"}],"visibility":"show","key":"mCKCMPQ2Co"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"HEIGHT AND WIDTH DISTRIBUTION (pixel space)","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"rWqos7u2xU"}],"identifier":"height-and-width-distribution-pixel-space","label":"HEIGHT AND WIDTH DISTRIBUTION (pixel space)","html_id":"height-and-width-distribution-pixel-space","implicit":true,"key":"HX8vxPFPYv"}],"key":"auC6Adsj3d"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"#plot to show distribution of how much coordinates in scenes vary \nplt.figure(figsize=(12,5))\n\nplt.subplot(1,2,1)\nsns.histplot(scene_stats[\"h_std\"], bins=30, kde=True)\nplt.title(\"Distribution of Height STD per Scene\")\nplt.xlabel(\"Height STD (pixels)\")\n\nplt.subplot(1,2,2)\nsns.histplot(scene_stats[\"w_std\"], bins=30, kde=True)\nplt.title(\"Distribution of Width STD per Scene\")\nplt.xlabel(\"Width STD (pixels)\")\n\nplt.tight_layout()\nplt.show()\n","visibility":"hide","key":"lCRzQxcx8C"},{"type":"output","id":"4KyiQvbC7qZm6QNQBYGBG","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"7a6eb598829868f4dcbfe8d77628c10a","path":"/7a6eb598829868f4dcbfe8d77628c10a.png"},"text/plain":{"content":"<Figure size 1200x500 with 2 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"vMT7PqUUJp"}],"visibility":"show","key":"UOvKNlnPE6"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"GAZE DENSITY IN PIXEL SPACE","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"coMh2GVLTX"}],"identifier":"gaze-density-in-pixel-space","label":"GAZE DENSITY IN PIXEL SPACE","html_id":"gaze-density-in-pixel-space","implicit":true,"key":"TH3lfarZO8"}],"key":"qixASSR32S"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"\n\nplt.figure(figsize=(8, 8))\nsns.kdeplot(\n    x=scene_stats[\"w_mean\"], \n    y=scene_stats[\"h_mean\"], \n    fill=True,  # fill the contours\n    cmap=\"viridis\",\n    thresh=0,   # show full density (no threshold)\n    levels=100  # number of contour levels (smoothness/detail)\n)\n\nplt.gca().invert_yaxis()\nplt.gca().invert_xaxis()\nplt.title(\"2D Density of Average Scene Positions (KDE)\")\nplt.xlabel(\"Mean Width (w)\")\nplt.ylabel(\"Mean Height (h)\")\nplt.tight_layout()\nplt.show()\n","visibility":"hide","key":"ppwivELgv7"},{"type":"output","id":"icuCfFI0TmE_QEzL0Z22n","data":[{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8cb1c48ece0f694ad0c6455c760db342","path":"/8cb1c48ece0f694ad0c6455c760db342.png"},"text/plain":{"content":"<Figure size 800x800 with 1 Axes>","content_type":"text/plain"}}}],"visibility":"show","key":"oD7OTdCWPm"}],"visibility":"show","key":"tSgHVt9nUg"}],"key":"aQotIfyJIR"},"references":{"cite":{"order":[],"data":{}}}}